<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Document</title>
        <style>
            table {
                width: 400px;
                border: 1px solid #000;
                border-collapse: collapse;
                margin: 0 auto;
            }

            td,
            th {
                border: 1px solid #000;
                text-align: center;
            }

            input {
                width: 50px;
            }

            .search {
                width: 600px;
                margin: 20px auto;
            }
        </style>
    </head>

    <body>
        <div class="search">
            按照价格查询:
            <input type="text" class="start" /> -
            <input type="text" class="end" />
            <button class="search-price">搜索</button> 按照商品名称查询:
            <input type="text" class="product" />
            <button class="search-pro">查询</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>id</th>
                    <th>产品名称</th>
                    <th>价格</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <script>
            // 利用新增数组方法操作数据
            var data = [{
                id: 0,
                pname: '小米',
                price: 3999
            },{
                id: 1,
                pname: '米家',
                price: 3999
            }, {
                id: 2,
                pname: 'oppo',
                price: 999
            }, {
                id: 3,
                pname: '荣耀',
                price: 1299
            }, {
                id: 4,
                pname: '华为',
                price: 1999
            }, ];
            var table = document.querySelector('table')
            var product = document.querySelector('.product')
            var pro = document.querySelector('.search-pro')
            var tbody = document.querySelector('tbody')
            var start = document.querySelector('.start')
            var end = document.querySelector('.end')
            var price = document.querySelector('.search-price')
            setData(data)
            // 将商品渲染到页面上
            function setData(data) {
                tbody.innerHTML = ''
                data.forEach(function(val,i) {
                    var tr = document.createElement('tr')
                    tbody.appendChild(tr)
                    for(var k in val) {
                        var td = document.createElement('td')
                        td.innerHTML = val[k]
                        tr.appendChild(td)
                    }
                })
            }
            // 名称查询
            pro.addEventListener('click', function() {
                // console.log(product.value);
                if (product.value.trim() != '') {
                    var arr = data.filter(function(val) {
                        return val.pname.indexOf(product.value) != -1

                    })
                    // console.log(arr);
                    setData(arr)
                }
            })

            // 价格查询 
            price.addEventListener('click', function() {
                start1 = (start.value.trim() == '') ? 0 : start.value
                end1 = (end.value.trim() == '') ? Infinity : end.value
                var arr = data.filter(function (val) {
                    return val.price >= start1 && val.price <= end1
                })
                setData(arr)
            })
        </script>
    </body>
</html>
